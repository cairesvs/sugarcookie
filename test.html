<html>
	<head>
		<title>Test</title>
		<style type="text/css" media="screen">
			.circle {
				border: 1px solid black;
				background-color: red;
				position: absolute;
				min-height: 20px;
			}
			.box {
				border: 1px solid black;
				background-color: blue;
				position: absolute;
			}
			body {
				overflow: hidden;
			}
		</style>
	</head>
	<body>
		<div id="ball"></div>
	</body>
	<script type="text/javascript" language="javascript" charset="utf-8">
	//<![CDATA[
		Array.prototype.remove = function(index) {
			if(typeof index == 'object')
				index = this.indexOf(index);

			this[index] = this[this.length - 1];
			this.pop();
		};

		function Circle(radius) {
			this.updateView = function() {
				this.circle.style.left = (this.x - radius) + 'px';
				this.circle.style.top = (this.y - radius) + 'px';
			};

			this.setPosition = function(t) {
				this.x = Math.sin(t * Math.PI * 2) * window.innerWidth * 0.5 + window.innerWidth*0.5;
				this.y = t * window.innerHeight;
				this.updateView();
			};

			(function(self) {
				self.circle = document.createElement('div');
				self.circle.className = 'circle';
				self.circle.style.width = (2 * radius) + 'px';
				self.circle.style.minHeight = (2 * radius) + 'px';
				self.circle.style.borderRadius = radius + 'px';
				self.circle.style.left = '-1000px';
				self.setPosition(0);
				document.body.appendChild(self.circle);
			})(this);

			this.destroy = function() {
				document.body.removeChild(this.circle);
			};
		}

		function Box(width, height, fixed) {
			(function(self) {
				self.x = 0;
				self.y = 0;
				self.width = width;
				self.height = height;
				self.box = document.createElement('div');
				self.box.className = 'box';
				self.box.style.width = width + 'px';
				self.box.style.minHeight = height + 'px';
				document.body.appendChild(self.box);
				if (typeof(fixed) == 'undefined') fixed = true;
			})(this);
			
			this.updateView = function() {
				this.box.style.left = (this.x - width*0.5) + 'px';
				this.box.style.top = (this.y - height*0.5) + 'px';
			};

			this.setPosition = function(x, y) {
				this.x = x;
				this.y = y;
				this.updateView();
			};

			this.destroy = function() {
				document.body.removeChild(this.box);
			};
		}

		function setupCannon() {
			var cannon = document.createElement('div');
			cannon.className = 'circle';
			var radius = 20;
			cannon.style.top = (window.innerHeight - radius) + 'px';
			cannon.style.width = (2 * radius) + 'px';
			cannon.style.minHeight = (2 * radius) + 'px';
			cannon.style.borderRadius = radius + 'px';
			cannon.style.zIndex = 9999;
			document.body.appendChild(cannon);

			window.addEventListener('mousemove', function(e){
				cannon.style.left = (e.clientX - radius) + 'px';
			}, false);
		}

		//setupCannon();

		var balls = [new Circle(20), new Circle(20), new Circle(20)];
		var floor = new Box(window.innerWidth, 10);
		var ceiling = new Box(window.innerWidth, 10);
		var leftWall = new Box(10, window.innerHeight);
		var rightWall = new Box(10, window.innerHeight);
		floor.setPosition(window.innerWidth*0.5, window.innerHeight-5);
		ceiling.setPosition(window.innerWidth*0.5, 5);
		leftWall.setPosition(5, window.innerHeight*0.5);
		rightWall.setPosition(window.innerWidth-5, window.innerHeight*0.5);

		var t = 0;
		setInterval(function() {
			t += 0.005;
			for (var i = 0; i < balls.length; i++) {
				balls[i].setPosition(t - i*0.01);
			}
			if (t > 1) t = 0;
		}, 16);
	//]]>
	</script>
</html>
